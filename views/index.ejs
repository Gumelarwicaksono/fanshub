<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap');

      * {
        font-family: 'Noto Sans', sans-serif;
        font-size: small;
        font-optical-sizing: auto;
        font-weight: weight;
        font-style: normal;
        font-variation-settings: 'wdth' 100;
      }
      main {
        min-height: 70vh !important;
      }
      .btn-success {
        background-color: #4caf50 !important;
      }
      .text-success {
        color: #4caf50 !important;
      }
      .border-success {
        border-color: #4caf50 !important;
      }
      .rounded-custom {
        border-radius: 25px;
      }
      .rounded-cs-50 {
        width: 10px !important;
        height: 10px !important;
        border-radius: 50% !important;
      }
      .img-size-logo {
        width: 30px;
        height: 30px;
      }
      .h-min {
        min-height: 322px !important;
      }
      footer {
        position: relative;
        bottom: 0;
        width: 100%;
        text-align: center;
      }
      .card-title {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .active-btn {
        background-color: #69db6d !important;
        color: white !important;
      }
    </style>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link rel="icon" type="image/png" sizes="128x128 " href="./image/logo.png" />
    <title>Fanshub - Hobi - Anime|Drakor|Kucing|Kartun|all</title>
  </head>
  <body class="bg-light">
    <nav class="navbar navbar-light bg-seconndary shadow mt-0">
      <div class="container-fluid">
        <span class="navbar-brand fw-bold mb-0 ms-2 h1"> Fanns<span class="navbar-brand text-success">hub</span> </span>
      </div>
    </nav>
    <header>
      <div class="container mt-3">
        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-indicators d-flex justify-content-start ms-5 mb-1">
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active rounded-cs-50" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" class="rounded-cs-50" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" class="rounded-cs-50" aria-label="Slide 3"></button>
          </div>
          <div class="carousel-inner rounded-custom">
            <div class="carousel-item active">
              <!-- <img src="https://drive.google.com/file/d/1KHLo0-r3icqpthnU1h3K2Y8W9NZ6sfEw/view?usp=sharing" class="d-block w-100" alt="..." /> -->
              <img src="./images/baner.jpg" class="d-block w-100 rounded-custom" alt="..." />
            </div>
            <div class="carousel-item">
              <img src="./images/baner.jpg" class="d-block w-100 rounded-custom" alt="..." />
            </div>
            <div class="carousel-item">
              <img src="./images/baner.jpg" class="d-block w-100 rounded-custom" alt="..." />
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
    </header>
    <main>
      <div id="myDiv" data-products="<%= JSON.stringify(products) %>"></div>
      <!-- CATEGORY BTN SECTION -->
      <section>
        <div class="container mt-3">
          <div class="row">
            <div class="col">
              <button class="btn btn-block btn-light border-success active-btn mt-1" onclick="filterProductsByCategory('All')">All</button>
              <% if (categories.length === 0) { %>
              <p>No categories available</p>
              <% } else { %> <% categories.forEach((category) => { %>
              <button class="btn btn-block btn-light border-success mt-1" onclick="filterProductsByCategory('<%= category.name %>')"><%= category.name %></button>
              <% }); %> <% } %>
            </div>
          </div>
        </div>
      </section>
      <!-- PRODUCTS ALL & FILTER -->
      <section>
        <div class="container mt-4 mb-4">
          <h3 class="fw-bold">Tunjukkin Hobimu Lewat Baju Mu yuk!</h3>
          <div class="row" id="product-list">
            <% if (products.length === 0) { %>
            <p>No categories available</p>
            <% } else { %> <% products.forEach((product) => { %>
            <div class="col-6 col-md-3 col-lg-2 m-0 p-0">
              <div class="card m-1 h-min">
                <img src="<%= product.imageUrl %>" alt="<%= product.name %>" class="card-img-top" />
                <div class="card-body m-0">
                  <h5 class="card-title fs-6 m-0"><%= product.name %></h5>
                  <div class="card-text m-0">
                    <div class="d-flex justify-content-between m-0 p-0">
                      <div class="m-0">
                        <del class="m-0"><%= product.price %></del>
                        <div class="text-success m-0 fw-bold"><%= product.subPrice %></div>
                      </div>
                      <div class="m-0">
                        <div class="bg-danger text-white divs-1 pe-1"><%= product.discount %>% Off</div>
                        <div><i class="bi bi-star-fill text-warning"></i><%= product.rating %></div>
                      </div>
                    </div>
                  </div>
                  <p class="card-text text-secondary fs-6 m-0"><i class="bi bi-geo-alt"></i><%= product.gudang %></p>
                  <div class="d-flex justify-content-between">
                    <a href="<%= product.detailUrl %>" class="btn btn-sm btn-success m-0 ps-3 pe-3">Buy Now</a>
                    <button
                      onclick="kirimPesanWhatsApp('<%= product.name %>','<%= product.price%>','<%= product.subPrice %>','<%= product.discount %>','<%= product.imageUrl %>','<%= product.detaileUrl %>')"
                      class="btn btn-sm btn-success m-0 ps-3 pe-3"
                    >
                      <i class="bi bi-whatsapp"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <% }); %> <% } %>
          </div>
        </div>
      </section>
    </main>
    <footer class="bg-dark d-flex justify-content-center align-items-center py-3">
      <p class="text-secondary mb-0">&copy; <span id="current-year"></span> fanshub.my.id. All rights reserved.</p>
    </footer>
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script>
      //GET DATA
      const products = JSON.parse(document.getElementById('myDiv').getAttribute('data-products'));

      //DATE UPDATE
      const currentYearElement = document.getElementById('current-year');
      const currentYear = new Date().getFullYear();
      currentYearElement.textContent = currentYear;

      //formating number
      function formatAngka(angka) {
        return angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.');
      }

      //SEND TO WHATSAP
      function kirimPesanWhatsApp(nama, price, subPrice, discount, urlGambar, detaileUrl) {
        let pesan = `
ðŸ”¥ PROMO TERBATAS! ${nama} ðŸ”¥

âœ¨ ${nama} âœ¨

Harga Normal: Rp${formatAngka(price)}
Diskon: ${discount}%
Harga Spesial: Rp${formatAngka(subPrice)}

Tampil stylish dan percaya diri dengan product terbaru kami! Bahan katun premium yang nyaman dan desain grafiti yang edgy bikin kamu jadi pusat perhatian. 

Stok Terbatas! Pesan Sekarang Sebelum Kehabisan!

âž¡ï¸ Klik di sini untuk cek ongkir dan pesan: ${detaileUrl} 

`;
        // Encode pesan dan URL gambar
        let pesanTerkode = encodeURIComponent(pesan);
        // let urlGambarTerkode = urlGambar;
        let urlGambarTerkode = encodeURIComponent(urlGambar);

        let url = `https://wa.me/6283166383802?text=${pesanTerkode}%0A%0A${urlGambarTerkode}`;
        // let url = `https://api.whatsapp.com/send?phone=6283166383802&text=${pesanTerkode}&media=${urlGambarTerkode}`;

        // Buka WhatsApp di tab/jendela baru
        window.open(url, '_blank');
      }

      //FILTER BY CATEGORY
      function filterProductsByCategory(val) {
        categoryName = val;
        let content = document.getElementById('product-list');
        const buttons = document.querySelectorAll('.btn');
        buttons.forEach((button) => {
          button.classList.remove('active-btn');
        });
        const activeButton = document.querySelector(`button[onclick="filterProductsByCategory('${categoryName}')"]`);
        activeButton.classList.add('active-btn');
        content.innerHTML = '';

        products.forEach((product) => {
          if (categoryName === '' || categoryName === 'All') {
            content.innerHTML += `
            <div class="col-6 col-md-3 col-lg-2 m-0 p-0">
              <div class="card m-1 h-min">
                <img src="${product.imageUrl}" alt="${product.name}" class="card-img-top" />
                <div class="card-body m-0">
                  <h5 class="card-title fs-6 m-0">${product.name}</h5>
                  <div class="card-text m-0">
                    <div class="d-flex justify-content-between m-0 p-0">
                      <div class="m-0">
                        <del class="m-0">${product.price}</del>
                        <div class="text-success m-0 fw-bold">${product.subPrice}</div>
                      </div>
                      <div class="m-0">
                        <div class="bg-danger text-white divs-1 pe-1">${product.discount}% Off</div>
                        <div><i class="bi bi-star-fill text-warning"></i>${product.rating}</div>
                      </div>
                    </div>
                  </div>
                  <p class="card-text text-secondary fs-6 m-0"><i class="bi bi-geo-alt"></i> ${product.gudang}</p>
                  <div class="d-flex justify-content-between">
                    <a href="${product.detailUrl}" class="btn btn-sm btn-success m-0 ps-3 pe-3">Buy Now</a>
                    <button onClick="kirimPesanWhatsApp('${product.name}','${product.price}','${product.subPrice}', '${product.discount}', '${product.imageUrl}','${product.detailUrl}')" class="btn btn-sm btn-success m-0 ps-3 pe-3"><i class="bi bi-whatsapp"></i></button>
                  </div>
                </div>
              </div>
            </div>
          `;
          }
          if (product.category.toLowerCase() === categoryName.toLowerCase()) {
            content.innerHTML += `
            <div class="col-6 col-md-3 col-lg-2 m-0 p-0">
              <div class="card m-1 h-min">
                <img src="${product.imageUrl}" alt="${product.name}" class="card-img-top" />
                <div class="card-body m-0">
                  <h5 class="card-title fs-6 m-0">${product.name}</h5>
                  <div class="card-text m-0">
                    <div class="d-flex justify-content-between m-0 p-0">
                      <div class="m-0">
                        <del class="m-0">${product.price}</del>
                        <div class="text-success m-0 fw-bold">${product.subPrice}</div>
                      </div>
                      <div class="m-0">
                        <div class="bg-danger text-white divs-1 pe-1">${product.discount}% Off</div>
                        <div><i class="bi bi-star-fill text-warning"></i>${product.rating}</div>
                      </div>
                    </div>
                  </div>
                  <p class="card-text text-secondary fs-6 m-0"><i class="bi bi-geo-alt"></i> ${product.gudang}</p>
                  <div class="d-flex justify-content-between">
                    <a href="${product.detailUrl}" class="btn btn-sm btn-success m-0 ps-3 pe-3">Buy Now</a>
                    <button onClick="kirimPesanWhatsApp('${product.name}','${product.price}','${product.subPrice}','${product.discount}','${product.imageUrl}','${product.detailUrl}')" class="btn btn-sm btn-success m-0 ps-3 pe-3"><i class="bi bi-whatsapp"></i></button>
                  </div>
                </div>
              </div>
            </div>
          `;
          }
        });
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
  </body>
</html>
